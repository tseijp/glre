---
title: 'nearest'
description: 'Nearest neighbor coordinate quantization for pixelation and discrete sampling effects'
keywords: [nearest, quantization, pixelation, sampling, discrete, grid]
date: 2025-08-06
---

import { FragmentEditor } from '@site/src/theme/FragmentEditor'

# nearest: Nearest Neighbor Quantization

### Coordinate Discretization and Pixelation

The `nearest` function quantizes continuous coordinates to discrete grid positions, creating pixelation effects and nearest-neighbor sampling patterns. This transformation maps smooth coordinates to the nearest grid points at a specified resolution.

## Mathematical Foundation

The quantization formula applies discrete sampling with offset correction:

$$
\text{nearest}(v, r) = \frac{\lfloor v \cdot r \rfloor}{r} + \frac{0.5}{r - 1}
$$

Where:

- $v$ = input coordinates [0,1]
- $r$ = resolution vector (grid dimensions)
- The offset term centers samples within grid cells

<FragmentEditor
        isFun
        code={`
const fragment = () => {
        const pixelated = nearest(uv, vec2(16, 12))
        const pattern = sin(pixelated.x.mul(20)).mul(cos(pixelated.y.mul(15)))
        const color = pattern.mul(0.5).add(0.5)
        return vec4(vec3(color), 1)
}`}
/>

<FragmentEditor
        isFun
        code={`
const fragment = () => {
        const resolution = vec2(8, 6).add(sin(iTime).mul(4))
        const quantized = nearest(uv, resolution)
        const cellId = floor(quantized.mul(resolution))
        const hue = mod(cellId.x.add(cellId.y.mul(3)), 8).div(8)
        const brightness = length(quantized.sub(0.5)).mul(2)
        return vec4(hue, brightness, float(1).sub(brightness), 1)
}`}
/>

## Grid Sampling Properties

**Uniform Quantization**: Creates regular grid sampling with consistent cell sizes across the coordinate space.

**Centered Sampling**: The offset term ensures sample points are centered within each grid cell rather than at corner positions.

**Resolution Control**: Independent X and Y resolution control allows for rectangular rather than square pixelation patterns.

## Digital Art Applications

**Pixel Art Effects**: Simulate low-resolution displays and retro gaming aesthetics through controlled pixelation.

**Mosaic Generation**: Create mosaic patterns by quantizing color sampling coordinates for tile-based compositions.

**Data Visualization**: Implement heatmap binning and histogram visualization through discrete coordinate mapping.
