---
title: 'line'
description: 'Line segment rendering with distance field precision and thickness control'
keywords: [line, segment, distance field, thickness, vector graphics]
date: 2025-08-06
---

import { FragmentEditor } from '@site/src/theme/FragmentEditor'

# line: Vector Line Segment Rendering

### Distance Field Line Segment Calculation

The `line` function renders line segments between two points using distance field mathematics. It computes the shortest distance from any point to the line segment and applies thickness control through the fill operation.

For 2D line segments:

$$
\text{lineSDF}(p, a, b) = \left| p - a - h \cdot (b - a) \right|
$$

where:

$$
h = \text{clamp}\left(\frac{(p - a) \cdot (b - a)}{(b - a) \cdot (b - a)}, 0, 1\right)
$$

The line function then applies:

$$
\text{line}(p, a, b, t) = \text{fill}(\text{lineSDF}(p, a, b), t)
$$

### Vector Projection and Segment Bounds

The line segment distance calculation projects the point onto the infinite line, then clamps the projection parameter to [0,1] to constrain results within the segment bounds. This prevents lines from extending infinitely beyond their endpoints.

The projection parameter h represents the normalized position along the segment where the perpendicular from the point intersects the line. Values of 0 and 1 correspond to the endpoints a and b respectively.

### Thickness Control and Anti-Aliasing

Thickness operates in distance field units, providing consistent visual width regardless of line orientation. The underlying fill operation applies automatic anti-aliasing based on screen-space derivatives, eliminating aliasing artifacts on diagonal lines.

<FragmentEditor
        isFun
        code={`
const fragment = () => {
        const p = uv.sub(0.5).mul(6)
        const t = iTime.mul(0.3)
        const a = vec2(sin(t), cos(t)).mul(2)
        const b = vec2(sin(t.add(3.14)), cos(t.add(3.14))).mul(1.5)
        const grid = line(p, a, b, 0.15)
        return vec4(grid.mul(vec3(0.8, 0.4, 0.9)), 1)
}`}
/>

<FragmentEditor
        isFun
        code={`
const fragment = () => {
        const p = uv.sub(0.5).mul(8)
        const angles = float(5)
        const result = float(0).toVar()
        Loop(int(angles), ({ i }) => {
                const angle = float(i).div(angles).mul(6.28)
                const r1 = sin(angle.mul(3).add(iTime)).mul(0.5).add(1.5)
                const r2 = cos(angle.mul(2).sub(iTime.mul(0.7))).mul(0.3).add(0.8)
                const a = vec2(cos(angle), sin(angle)).mul(r1)
                const b = vec2(cos(angle), sin(angle)).mul(r2)
                const thickness = sin(angle.add(iTime.mul(2))).mul(0.05).add(0.08)
                result.addAssign(line(p, a, b, thickness))
        })
        return vec4(result.clamp(0, 1).mul(vec3(0.1, 0.6, 0.8)), 1)
}`}
/>