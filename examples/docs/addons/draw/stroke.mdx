---
title: 'stroke'
description: 'Distance field outline generation with controlled width and anti-aliasing'
keywords: [stroke, outline, distance field, line width, anti-aliased]
date: 2025-08-06
---

import { FragmentEditor } from '@site/src/theme/FragmentEditor'

# stroke: Outline Generation from Distance Fields

### Mathematical Definition of Stroke Operation

The `stroke` function creates outlines by calculating the difference between two offset distance field evaluations. It generates bands of specified width centered on zero-crossing boundaries.

For edge-controlled stroking:

$$
\text{stroke}(x, s, w, e) = \text{saturate}\left(
\text{smoothstep}(s-e, s+e, x+\frac{w}{2}) - \text{smoothstep}(s-e, s+e, x-\frac{w}{2})
\right)
$$

For anti-aliased stroking:

$$
\text{stroke}(x, s, w) = \text{saturate}\left(
\text{aastep}(s, x+\frac{w}{2}) - \text{aastep}(s, x-\frac{w}{2})
\right)
$$

### Distance Field Offset Calculation

The stroke operation evaluates the distance field at two offset positions: `x + w/2` and `x - w/2`. This creates inner and outer boundaries at equal distances from the original zero-crossing line.

The difference between these evaluations produces a band where values transition from 0 to 1 and back to 0. The width parameter directly controls the spatial extent of this band in distance field units.

### Boundary Smoothing and Width Control

Width parameter operates in distance field coordinate space. Larger values create thicker outlines, while smaller values produce thinner lines. The anti-aliased version automatically adjusts smoothing based on screen-space derivatives.

The edge parameter provides explicit control over transition smoothness, enabling artistic effects from sharp mechanical lines to soft organic boundaries.

<FragmentEditor
        isFun
        code={`
const fragment = () => {
        const p = uv.sub(0.5).mul(8)
        const d1 = p.length().sub(2)
        const d2 = p.x.abs().add(p.y.abs()).sub(2.5)
        const shape = d1.min(d2)
        const outline = stroke(shape, 0, 0.2)
        return vec4(outline.mul(vec3(0.9, 0.3, 0.1)), 1)
}`}
/>

<FragmentEditor
        isFun
        code={`
const fragment = () => {
        const p = uv.sub(0.5).mul(10)
        const wave = sin(p.x.mul(2)).mul(0.5)
        const d = p.y.sub(wave).abs().sub(0.3)
        const thickness = sin(p.x.mul(0.8).add(iTime)).mul(0.1).add(0.15)
        const stroked = strokeWithEdge(d, 0, thickness, 0.05)
        return vec4(stroked.mul(vec3(0.2, 0.7, 0.9)), 1)
}`}
/>