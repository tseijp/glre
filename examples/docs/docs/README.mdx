---
marp: true
hide_table_of_contents: true
title: 'Introduction'
description: 'Introduction'
image: https://github.com/tseijp.png
keywords: [glsl, webgl, hooks, react, reactjs, reactive, solid, solidjs, typescript]
date: 2023-01-01
---

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import { FragmentEditor } from '@site/src/theme/FragmentEditor'

# Introduction

## What does it look like?

<table>
        <tbody>
                <tr>
                        <td width="7500px" align="center" valign="center">
                                glre simplifies WebGL2 / WebGPU programming via TypeScript, React, Solid and more
                        </td>
                        <td width="2500px" valign="top">
                                <a href="https://codesandbox.io/s/glre-basic-demo-ppzo3d">
                                        <img alt="4" src="https://i.imgur.com/Lb3h9fs.jpg"></img>
                                </a>
                        </td>
                </tr>
        </tbody>
</table>

<Tabs>
<TabItem value="react" label="React">

```jsx
import { createRoot } from 'react-dom/client'
import { useGL } from 'glre/react'
import { vec4, uv } from 'glre/node'
const Canvas = () => {
        const gl = useGL({ frag: vec4(uv, 0, 1) })
        return <canvas ref={gl.ref} />
}

createRoot(document.getElementById('root')).render(<Canvas />)
```

</TabItem>
<TabItem value="react-native" label="React Native">

```jsx
import { GLView } from 'expo-gl'
import { registerRootComponent } from 'expo'
import { useGL } from 'glre/native'
import { vec4, uv } from 'glre/node'
const Canvas = () => {
        const gl = useGL({ frag: vec4(uv, 0, 1) })
        return <GLView style={{ flex: 1 }} onContextCreate={gl.ref} />
}

registerRootComponent(Canvas)
```

</TabItem>
<TabItem value="solid-js" label="Solid.js">

```jsx
import { render } from 'solid-js/web'
import { onGL } from 'glre/solid'
import { vec4, uv } from 'glre/node'
const Canvas = () => {
        const gl = onGL({ frag: vec4(uv, 0, 1) })
        return <canvas ref={gl.ref} />
}

render(() => <Canvas />, document.getElementById('root'))
```

</TabItem>
<TabItem value="esm" label="ESM">

```html
<script type="module">
        import { createGL } from 'https://esm.sh/glre'
        import { vec4, uv } from 'https://esm.sh/glre/node'
        createGL({ fs: vec4(uv, 0, 1) }).mount()
</script>
```

</TabItem>
</Tabs>

## Varying

<Tabs>
        <TabItem value="tsl" label="TSL (TypeScript Shading Language)">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const position = attribute([0, 0.73, -1, -1, 1, -1])
        const color = attribute([1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1])
        const gl = useGL({
                isWebGL: true,
                count: 3,
                vert: vec4(position, 0.0, 1.0),
                frag: vertexStage(color),
        })
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgl" label="WebGL">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: true,
                count: 3,
                vertex: \`
                #version 300 es
                in vec4 position;
                in vec4 color;
                out vec4 v_color;
                void main() {
                        gl_Position = position;
                        v_color = color;
                }
                \`,
                fragment: \`
                #version 300 es
                precision mediump float;
                in vec4 v_color;
                out vec4 fragColor;
                void main() {
                        fragColor = v_color;
                }
                \`,
        })
        gl.attribute('position', [0, 0.73, -1, -1, 1, -1])
        gl.attribute('color', [1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1])
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgpu" label="WebGPU">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: false,
                count: 3,
                vertex: \`
                struct In {
                        @location(0) position: vec2f,
                        @location(1) color: vec4f,
                }
                struct Out {
                        @builtin(position) position: vec4f,
                        @location(0) v_color: vec4f,
                }
                @vertex
                fn main(in: In) -> Out {
                        var out: Out;
                        out.position = vec4f(in.position, 0.0, 1.0);
                        out.v_color = in.color;
                        return out;
                }
                \`,
                fragment: \`
                struct Out {
                        @builtin(position) position: vec4f,
                        @location(0) v_color: vec4f,
                }
                @fragment
                fn main(out: Out) -> @location(0) vec4f {
                        return out.v_color;
                }
                \`,
        })
        gl.attribute('position', [0, 0.73, -1, -1, 1, -1])
        gl.attribute('color', [1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 1])
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
</Tabs>

## Uniforms

<Tabs>
        <TabItem value="tsl" label="TSL (TypeScript Shading Language)">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: true,
                frag: vec4(uv.sub(iMouse).fract(), iTime.sin().mul(0.5).add(0.5), 1),
        })
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgl" label="WebGL">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: true,
                fragment: \`
                #version 300 es
                precision mediump float;
                uniform vec2 iResolution;
                uniform vec2 iMouse;
                uniform float iTime;
                out vec4 fragColor;
                void main() {
                        vec2 uv = fract(gl_FragCoord.xy / iResolution.xy - iMouse);
                        fragColor = vec4(uv, sin(iTime) * 0.5 + 0.5, 1.0);
                }
                \`,
        })
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgpu" label="WebGPU">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: false,
                fragment: \`
                @group(0) @binding(0) var<uniform> iResolution: vec2f;
                @group(0) @binding(1) var<uniform> iMouse: vec2f;
                @group(0) @binding(2) var<uniform> iTime: f32;
                @fragment
                fn main(@builtin(position) position: vec4f) -> @location(0) vec4f {
                        let uv = fract(position.xy / iResolution - iMouse);
                        return vec4f(uv, sin(iTime) * 0.5 + 0.5, 1.0);
                }
                \`,
        })
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
</Tabs>

## Attributes

<Tabs>
        <TabItem value="tsl" label="TSL (TypeScript Shading Language)">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const position = attribute([0, 0.73, -1, -1, 1, -1])
        const gl = useGL({
                isWebGL: true,
                count: 3,
                vert: vec4(position, 0, 1),
        })
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgl" label="WebGL">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: true,
                count: 3,
                vert: \`
                #version 300 es
                in vec4 position;
                void main() {
                        gl_Position = position;
                }
                \`,
        })
        gl.attribute('position', [0, 0.73, -1, -1, 1, -1])
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgpu" label="WebGPU">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: false,
                count: 3,
                vertex: \`
                @vertex
                fn main(@location(0) position: vec2f) -> @builtin(position) vec4f {
                        return vec4f(position, 0.0, 1.0);
                }
                \`,
        })
        gl.attribute('position', [0, 0.73, -1, -1, 1, -1])
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
</Tabs>

### Multiples

<Tabs>
        <TabItem value="tsl" label="TSL (TypeScript Shading Language)">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const position = attribute([0, 0.37, -0.5, -0.5, 0.5, -0.5])
        const gl = useGL(
                {
                        isWebGL: true,
                        count: 3,
                        vert: vec4(vec2(-0.5, 0).add(position), 0, 1),
                },
                {
                        count: 3,
                        vert: vec4(vec2(0.5, 0).add(position), 0, 1),
                }
        )
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgl" label="WebGL">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL(
                {
                        isWebGL: true,
                        count: 3,
                        vert: \`
                        #version 300 es
                                in vec2 position;
                                void main() {
                                gl_Position = vec4((vec2(-0.5, 0.0) + position), 0.0, 1.0);
                        }\`,
                },
                {
                        count: 3,
                        vert: \`
                        #version 300 es
                                in vec2 position;
                                void main() {
                                gl_Position = vec4((vec2(0.5, 0.0) + position), 0.0, 1.0);
                        }\`,
                }
        )
        gl.attribute('position', [0, 0.37, -0.5, -0.5, 0.5, -0.5])
        return <canvas ref={gl.ref} />
}`}
                />
        </TabItem>
        <TabItem value="webgpu" label="WebGPU">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL(
                {
                        isWebGL: false,
                        count: 3,
                        vert: \`
                        struct In {
                                @location(0) position: vec2f
                        }
                        struct Out {
                                @builtin(position) position: vec4f
                        }
                        @vertex
                        fn main(in: In) -> Out {
                                var out: Out;
                                out.position = vec4f((vec2f(-0.5, 0.0) + in.position), 0.0, 1.0);
                                return out;
                        }\`,
                },
                {
                        count: 3,
                        vert: \`
                        struct In {
                                @location(0) position: vec2f
                        }
                        struct Out {
                                @builtin(position) position: vec4f
                        }
                        @vertex
                        fn main(in: In) -> Out {
                                var out: Out;
                                out.position = vec4f((vec2f(0.5, 0.0) + in.position), 0.0, 1.0);
                                return out;
                        }\`,
                }
        )
        gl.attribute('position', [0, 0.37, -0.5, -0.5, 0.5, -0.5])
        return <canvas ref={gl.ref} />
}`}
                />
        </TabItem>
</Tabs>

## Textures

<Tabs>
        <TabItem value="tsl" label="TSL (TypeScript Shading Language)">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const iTexture = uniform('https://avatars.githubusercontent.com/u/40712342')
        const gl = useGL({
                isWebGL: true,
                frag: texture(iTexture, uv),
        })
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgl" label="WebGL">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: true,
                fragment: \`
                #version 300 es
                precision mediump float;
                uniform vec2 iResolution;
                uniform sampler2D iTexture;
                out vec4 fragColor;
                void main() {
                        vec2 uv = gl_FragCoord.xy / iResolution.xy;
                        fragColor = texture(iTexture, uv);
                }
                \`,
        })
        gl.texture('iTexture', 'https://avatars.githubusercontent.com/u/40712342')
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
        <TabItem value="webgpu" label="WebGPU">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const gl = useGL({
                isWebGL: false,
                fragment: \`
                @group(0) @binding(0) var<uniform> iResolution: vec2f;
                @group(1) @binding(0) var iSampler: sampler;
                @group(1) @binding(1) var iTexture: texture_2d<f32>;
                @fragment
                fn main(@builtin(position) position: vec4f) -> @location(0) vec4f {
                        let uv = position.xy / iResolution;
                        return textureSample(iTexture, iSampler, uv);
                }
                \`,
        })
        gl.texture('iTexture', 'https://avatars.githubusercontent.com/u/40712342')
        return <canvas ref={gl.ref} />
}
`}
                />
        </TabItem>
</Tabs>

### Compute

<Tabs>
        <TabItem value="tsl" label="TSL (TypeScript Shading Language)">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const wave = storage(float(new Float32Array(1024)), 'wave')
        const gl = useGL({
                isWebGL: true,
                compute: Scope(() => {
                        If(uint(0).equal(id.x), () => {
                                wave.element(id.x).assign(iMouse.x)
                        }).Else(() => {
                                wave.element(id.x).assign(wave.element(id.x.sub(uint(1))))
                        })
                }),
                fragment: Scope(() => {
                        const x = wave.element(uint(uv.y.mul(1024))).sub(uv.x).abs()
                        return vec4(vec3(0, smoothstep(0.01, 0, x), 0), 1)
                }),
        })
        return <canvas ref={gl.ref} />
}`}
                />
        </TabItem>
        <TabItem value="webgl" label="WebGL">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const wave = storage(float(new Float32Array(1024)), 'wave')
        const gl = useGL({
                isWebGL: true,
                isDebug: true,
                compute: \`
                #version 300 es
                precision highp float;
                uniform sampler2D wave;
                uniform vec2 iMouse;
                layout(location = 0) out vec4 _wave;
                void main() {
                        if ((uint(0.0) == uvec3(uint(gl_FragCoord.y) * uint(32) + uint(gl_FragCoord.x), 0u, 0u).x)) {
                                _wave = vec4(iMouse.x, 0.0, 0.0, 1.0);
                        } else {
                                _wave = vec4(texelFetch(wave, ivec2(int((uvec3(uint(gl_FragCoord.y) * uint(32) + uint(gl_FragCoord.x), 0u, 0u).x - uint(1.0))) % 32, int((uvec3(uint(gl_FragCoord.y) * uint(32) + uint(gl_FragCoord.x), 0u, 0u).x - uint(1.0))) / 32), 0).x, 0.0, 0.0, 1.0);
                        };
                }\`,
                fragment: \`
                #version 300 es
                precision highp float;
                out vec4 fragColor;
                uniform vec2 iResolution;
                uniform sampler2D wave;
                void main() {
                        fragColor = vec4(vec3(0.0, smoothstep(0.01, 0.0, abs((texelFetch(wave, ivec2(int(uint(((gl_FragCoord.xy / iResolution).y * 1024.0))) % 32, int(uint(((gl_FragCoord.xy / iResolution).y * 1024.0))) / 32), 0).x - (gl_FragCoord.xy / iResolution).x))), 0.0), 1.0);
                }\`,
        })
        gl.storage('wave', new Float32Array(1024))
        return <canvas ref={gl.ref} />
}`}
                />
        </TabItem>
        <TabItem value="webgpu" label="WebGPU">
                <FragmentEditor
                        isApp
                        code={`
function Canvas() {
        const wave = storage(float(new Float32Array(1024)), 'wave')
        const gl = useGL({
                isWebGL: false,
                compute: \`
                struct In {
                        @builtin(global_invocation_id) global_invocation_id: vec3u
                }
                @group(0) @binding(1) var<uniform> iMouse: vec2f;
                @group(2) @binding(0) var<storage, read_write> wave: array<f32>;
                @compute @workgroup_size(32)
                fn main(in: In) {
                        if ((u32(0.0) == in.global_invocation_id.x)) {
                                wave[in.global_invocation_id.x] = iMouse.x;
                        } else {
                                wave[in.global_invocation_id.x] = wave[in.global_invocation_id.x - u32(1.0)];
                        };
                }\`,
                fragment: \`
                struct Out {
                        @builtin(position) position: vec4f
                }
                @group(2) @binding(0) var<storage, read_write> wave: array<f32>;
                @group(0) @binding(0) var<uniform> iResolution: vec2f;
                @fragment
                fn main(out: Out) -> @location(0) vec4f {
                        return vec4f(vec3f(0.0, smoothstep(0.01, 0.0, abs((wave[u32(((out.position.xy / iResolution).y * 1024.0))] - (out.position.xy / iResolution).x))), 0.0), 1.0);
                }\`,
        })
        gl.storage('wave', new Float32Array(1024))
        return <canvas ref={gl.ref} />
}`}
                />
        </TabItem>
</Tabs>
